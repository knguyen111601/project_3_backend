//////////////////////////////////////////////////////////////////////
// Import Our Dependencies
//////////////////////////////////////////////////////////////////////
require("dotenv").config()
const express = require("express")
const mongoose = require("./db/connection")
const morgan = require("morgan")
const cors = require("cors")
const app = express();
const {PORT = 1337} = process.env

// Import Router
const WishlistRouter = require("./controllers/wishlist")
//////////////////////////////////////////////////////////////////////
// Middleware 
//////////////////////////////////////////////////////////////////////
app.use(cors()) // prevent cors errors, opens up access for frontend
app.use(morgan("dev")) // logging
app.use(express.json()) // parse json bodies

//////////////////////////////////////////////////////////////////////
// Routes
//////////////////////////////////////////////////////////////////////

app.get("/", WishlistRouter)

//////////////////////////////////////////////////////////////////////
// Server Listener
//////////////////////////////////////////////////////////////////////
app.listen(PORT, ()=>{console.log(`Now listening on PORT ${PORT}`)})